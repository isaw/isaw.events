<html>

    <metal:header define-macro="header_resources">
        <metal:header use-macro="context/@@header_macros/base_resources">
            <metal:custom_resources fill-slot="custom_resources">
                <metal:custom_resources define-slot="custom_resources" />
            </metal:custom_resources>
        </metal:header>    
        <metal:header use-macro="context/@@header_macros/kukit_resource" />
    </metal:header>

    <metal:header define-macro="base_resources">
    
    <tal:define define="global mainkss string:${context/@@absolute_url}/++resource++${viewname}.kss" />
    
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />

    <link rel="kinetic-stylesheet" type="text/kss"
          tal:attributes="href mainkss"/>
    
    <link rel="kinetic-stylesheet" type="text/kss"
          tal:attributes="href string:${context/@@absolute_url}/++resource++help.kss"/>
    
    <link rel="stylesheet" type="text/css"
          tal:attributes="href string:${context/@@absolute_url}/@@kss_devel_mode/ui_css"/>

    <script type="text/javascript"
      tal:attributes="src string:${context/@@absolute_url}/++resource++sarissa.js;"
      src="++resource++sarissa.js">
    </script>

    <metal:custom_resources define-slot="custom_resources" />

    <script type="text/javascript"
      tal:attributes="src string:${context/@@absolute_url}/++resource++firebuglite/firebug.js;"
      src="++resource++firebuglite/firebug.js">
    </script>

    <!-- Use original cssQuery -->
    <!--script type="text/javascript"
      tal:attributes="src string:${context/@@absolute_url}/++resource++cssQuery.js;"
      src="++resource++cssQuery.js">
    </script!-->

    <!-- Use base2 cssQuery -->
    <script type="text/javascript"
      tal:attributes="src string:${context/@@absolute_url}/++resource++base2-dom-fp.js;"
      src="++resource++base2-dom-fp.js">
    </script>

    </metal:header>

    <metal:header define-macro="kukit_resource">

      <tal:block define="kss_devel_mode nocall:here/@@kss_devel_mode | nothing">

        <script tal:condition="python: not kss_devel_mode or kss_devel_mode.isoff()" type="text/javascript"
          tal:attributes="src string:${context/@@absolute_url}/++resource++kukit.js;"
          src="++resource++kukit.js">
        </script>

        <script tal:condition="python: kss_devel_mode and kss_devel_mode.ison()" type="text/javascript"
          tal:attributes="src string:${context/@@absolute_url}/++resource++kukit-devel.js;"
          src="++resource++kukit-devel.js">
        </script>

      </tal:block>

    </metal:header>

    <!-- prototype -->

    <metal:header define-macro="header_resources_with_prototype">
        <metal:header use-macro="context/@@header_macros/base_resources">
            <metal:custom_resources fill-slot="custom_resources">
                <metal:custom_resources define-slot="custom_resources" />
            </metal:custom_resources>
        </metal:header>    
        <metal:header use-macro="context/@@header_macros/prototype_extra_resources" />
        <metal:header use-macro="context/@@header_macros/kukit_resource" />
    </metal:header>

    <metal:header define-macro="prototype_extra_resources">
    <script type="text/javascript"
      tal:attributes="src string:${context/@@absolute_url}/++resource++prototype.js;"
      src="++resource++prototype.js">
    </script>
    <script type="text/javascript"
      tal:attributes="src string:${context/@@absolute_url}/++resource++effects.js;"
      src="++resource++effects.js">
    </script>
    <script type="text/javascript"
      tal:attributes="src string:${context/@@absolute_url}/++resource++dragdrop.js;"
      src="++resource++dragdrop.js">
    </script>
    </metal:header>

    <!-- ajaxslt-->

    <metal:header define-macro="header_resources_with_ajaxslt">
        <metal:header use-macro="context/@@header_macros/base_resources">
            <metal:custom_resources fill-slot="custom_resources">
                <metal:custom_resources define-slot="custom_resources" />
            </metal:custom_resources>
        </metal:header>    
        <metal:header use-macro="context/@@header_macros/ajaxslt_extra_resources" />
        <metal:header use-macro="context/@@header_macros/kukit_resource" />
    </metal:header>

    <metal:header define-macro="ajaxslt_extra_resources">
    <script type="text/javascript"
      tal:attributes="src
      string:${context/@@absolute_url}/++resource++ajaxslt_misc.js;"
      src="++resource++ajaxslt_misc.js">
    </script>
    <script type="text/javascript"
      tal:attributes="src
      string:${context/@@absolute_url}/++resource++ajaxslt_dom.js;"
      src="++resource++ajaxslt_dom.js">
    </script>
    <script type="text/javascript"
      tal:attributes="src
      string:${context/@@absolute_url}/++resource++ajaxslt_xpath.js;"
      src="++resource++ajaxslt_xpath.js">
    </script>
    <!--script type="text/javascript"
      tal:attributes="src
      string:${context/@@absolute_url}/++resource++ajaxslt_xslt.js;"
      src="++resource++ajaxslt_xslt.js">
    </script-->
    </metal:header>
</html>    
